



# 聚合函数和内置函数

## 1.聚合
> 为了快速得到统计数据，提供了5个聚合函数

### 1.1 count()
> count(*)表示计算总行数，括号中写星与列名，结果是相同的


**举例**：

查询学生总数：

    select count(*) from students;
### 1.2 max()
> max(列)表示求此列的最大值

    select max(id) from students where gender=0;

### 1.3 min()
> min(列)表示求此列的最小值

    select min(id) from students where isdelete=0;

### 1.4 sum()
> sum(列)表示求此列的和

    select sum(id) from students where gender=1;

### 1.5 avg()
> avg(列)表示求此列的平均值

    select avg(id) from students where isdelete=0 and gender=0;
## 2.内置函数
### 2.1 字符串函数
#### 2.1.1 ascii()
> 查看字符的ascii码值ascii(str)，str是空串时返回0

    select ascii('a');
#### 2.1.2 char()
> 查看ascii码值对应的字符char(数字)

    select char(97);
#### 2.1.3 concat()
> 拼接字符串concat(str1,str2...)

    select concat(12,34,'ab');
#### 2.1.4 length()
> 包含字符个数length(str)

    select length('abc');

#### 2.1.5 截取字符串
1. left(str,len) 返回字符串str的左端len个字符
2. right(str,len) 返回字符串str的右端len个字符
3. substring(str,pos,len) 返回字符串str的位置pos起len个字符
  
        select substring('abc123',2,3);

#### 2.1.6 去除空格
1. ltrim(str)
  
    返回删除了左空格的字符串str
2. rtrim(str)
  
    返回删除了右空格的字符串str
3. trim([方向 remstr from str)

    返回从某侧删除remstr后的字符串str

    方向词包括both、leading、trailing，表示两侧、左、右
    
        select trim('  bar   ');
        select trim(leading 'x' FROM 'xxxbarxxx');
        select trim(both 'x' FROM 'xxxbarxxx');
        select trim(trailing 'x' FROM 'xxxbarxxx');

#### 2.1.7space(n)
> 返回由n个空格字符组成的一个字符串space(n)

    select space(10);
#### 2.1.8 replace()

> 替换字符串replace(str,from_str,to_str)

        select replace('abc123','123','def');

#### 2.1.9 大小写转换

1. lower(str)
2. upper(str)

        select lower('aBcD');

### 2.2 数学函数
#### 2.2.1 abs(n)

> 求绝对值abs(n)

    select abs(-32)
#### 2.2.2 mod(m,n)
> 求m除以n的余数mod(m,n)，同运算符%

    select mod(10,3);
    select 10%3;

#### 2.2.3 floor(n)
> 地板floor(n)，表示不大于n的最大整数

    select floor(2.3);
#### 2.2.4 ceiling(n)
> 天花板ceiling(n)，表示不小于n的最大整数

    select ceiling(2.3);
#### 2.2.5 round(n,d)
> 求四舍五入值round(n,d)，n表示原数，d表示小数位置，默认为0

    select round(1.6);
#### 2.2.6 pow(x,y)
>   求x的y次幂pow(x,y)

    select pow(2,3);
#### 2.2.7 PI()
> 获取圆周率PI()

    select PI();

#### rand()
>随机数rand()，值为0-1.0的浮点数

    select rand();
#### 其它
>还有其它很多三角函数，使用时可以查询文档

### 2.3日期时间函数
> 获取子值，语法如下
- year(date) 返回date的年份(范围在1000到9999)
- month(date) 返回date中的月份数值
- day(date) 返回date中的日期数值
- hour(time) 返回time的小时数(范围是0到23)
- minute(time) 返回time的分钟数(范围是0到59)
- second(time) 返回time的秒数(范围是0到59)

         select year('2016-12-21');

#### 日期计算
> 使用+-运算符，数字后面的关键字为year、month、day、hour、minute、second

        select '2016-12-21'+interval 1 day;
#### 日期格式化
> 日期格式化date_format(date,format),format参数可用的值如下

- 获取年%Y，返回4位的整数
- 获取年%y，返回2位的整数
- 获取月%m，值为1-12的整数
- 获取日%d，返回整数
- 获取时%H，值为0-23的整数
- 获取时%h，值为1-12的整数
- 获取分%i，值为0-59的整数
- 获取秒%s，值为0-59的整数
　
  
        select date_format('2016-12-21','%Y %m %d');

#### 其它
- 当前日期 current_date()

  
    select current_date();

- 当前时间 current_time()


    select current_time();

- 当前日期时间now()
  

    select now();