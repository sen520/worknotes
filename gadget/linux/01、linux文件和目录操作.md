## 文件和目录操作

#### 1、basename 指令：从文件名中去掉路径和后缀

【语法】 `basename 选项  参数`

【功能介绍】 basename 指令显示去掉路径信息后的纯粹的文件名。如果指定文件后缀，则将文件后缀也去除

【选项】

- `--help`  显示帮助信息
- `--verson` 显示版本信息

【参数说明】

- 文件   指定带路径信息的文件名。例如： /etc/httpd/conf/httpd.conf
- 后缀    指定要去除的文件后缀。此参数是可选项，省略后将不会去除文件后缀名。

【技巧提示】

basename 指令在shell脚本程序设计时非常有用，可以利用它得到去除了目录和后缀后的纯粹的文件名，以方便在脚本中操作文件，以方便在脚本程序中操作文件。

【实例】

① 文件名中去掉路径信息，只显示纯粹的文件名

```
[root@sen ~]# basename /etc/rdir
rdir
```

② 文件名中去掉路径信息和后缀，只显示纯粹的文件名

```
[root@sen ~]# basename /root/install.log .log
install
```

#### 2、cd 指令：切换当前工作目录到指定目录

【语法】`cd 选项  参数`

【功能介绍】cd 指令是linux操作系统中使用频率最高的指令之一。默认情况下，不带任何选项和参数的cd指令，将切换到由shell中的环境变量`HOME`的值所代表的目录。另外，如果要切换到的目录不是以“/”开头的绝对路径，则cd指令会按照环境变量“CDPATH”（环境变量“CDPATH”的值是使用冒号隔开的一系列目录名）的值来一次搜索要切换到的“目录”；反之，将忽略环境变量“CDPATH”。

【选项说明】

- `-P`  如果“目录”参数是符号链接，则进入此符号链接所指定的目录
- `-L` 如果“目录”参数是符号链接，则进入的目录就是符号链接所代表的目录，而不是此符号链接所指向的目录的实际目录
- `-`  使用单独的”-“ 选项时，将把当前工作目录切换到环境变量”OLDPWD“的值所代表的目录

【技巧提示】

- 没有参数的`cd` 指令和`cd~`以及`cd $HOME`指令的功能相同，他们都是把用户的当前工作目录切换到宿主目录（即用户登录系统时的初始目录）
- 在使用`cd` 指令时，为了加快参数的输入速度和准确度，经常使用“TAB”键来利用命令行的自动补齐功能

#### 3、chgrp指令：改变文件所属组

【语法】 chgrp  选项  参数

【功能介绍】 chgrp 指令用来改变指定文件或目录所属的组

【选项说明】

- `-c` 或`--changes`  详细的显示文件所属组的实际变化情况。
- `-f`或`--silent`或`--quiet` 不显示任何报错信息
- `-h` 或`--no-dereference` 修改符号连接所属的组，而不修改符号连接的指向的文件。（此选项只有在系统中提供了“lchown”系统调用时才有效）
- `-v`或`--verbose`显示指令执行的详细操作过程
- `--R`或`--recursive`递归修改指定目录及其目录下所有子目录和文件的所属组。
- `--dereference` 修改符号链接所指定的实际文件的所属组，而非符号连接本身
- `--reference=<参考文件>` 把指定文件的所属组改为与指定参考文件所属组相同

【参数说明】

组  指定为文件设置的新组名

文件  要改变所有者和组的文件列表，可以是多个文件或者目录，支持通配符

【技巧提示】

- 如果有大量文件需要改变所有权，而这些文件又在同一个目录下时，此时可以使用`chgrp`指令的`-R` 选项一次向的完成修改。如果要修改的文件名有规律则可以借助于shell中的通配符功能简化操作
- 组名可以使用组ID代替

#### 4、chmod

【语法】 chmod 选项  参数

【功能介绍】 chmod 指令按照指定的权限模式来设置文件权限。chmod支持两种权限模式：字符标记法和数字标记法。

字符标记法表示权限模式的语法格式为“`[ugoa][[+_=][rwxXstugo]]`”，其中“`[ugoa]`”表示对哪类用户设置权限，linux系统对用户的分类如下：

- u 用户名（user），即文件或目录的所有者
- g 组名（group），即与文件所有者同一组的其他用户
- o 其他所有用户（others）,即除上面两类用户（文件所有者和同组的其他用户）的其他所有用户
- a  系统的所有用户（all）,包括上述三类用户，是系统的默认缺省值

"`[+_=]`" 表示操作符，具体含义如下：

+ \+  在原有权限的基础上添加某些权限
+  _  在原有权限的基础减去某些权限
+  =  不管原来的权限是什么，将文件的权限设置成给定的权限

“`[rwxXstugo]`” 表示具体的权限组合，具体含义如下

- r  可读
- w 可写
- x  可执行
- X  只有当目标文件对用户是可执行的或该目标文件是目录时才设置X权限
- s  设定`suid`和`sgid`权限，只能和“`u`”，“`g`” 连用，例如“`u+s`”, "`g-s`"
- t  粘附位。在POSIX标准没有提及粘附位，它最初是指可执行程序在第一次运行时，在交换空间上保留程序文件副本，以便下次运行后提高速度，现在已经很少使用了。如果目录设置了粘附位，那么只用文件和目录的所有者可以删除该目录下的文件。粘附位一般适用于类似于“`/tmp`”目录这样有基本写权限的目录。如果文件或目录没有可执行权限，则设置粘附位后将在对应位置显示“`T`”，这样讲失去粘附位的功能
- u  设置与文件所有者具有相同的权限
- g   设置与文件所属组具有相同的权限
- o   设置与其他用户具有相同的权限

数字标记法表示的权限模式是四个八进制书，每个数有位权为4,2,1三个八进制数相加得到。如果对应位的数字被省略掉，则将此位置的数字缺省设置为零。数字所代表的权限的含义：0 表示没有权限；在第一个八进制数中1表示站滞位，2表示sgid权限，4表示sgid权限，然后将这三个数字相加所得到的数字即为最终权限。第二至第四个八进制数中1表示可执行权限，2表示可写权限，4表示可读权限，然后将这三个数字相加所得到的数字即为最终权限。第二位数字代表文件所有者（u）的权限，第三位数字代表文件所属组的用户（g）的权限。第四位数字代表其他所有用户（0）的权限。

【选项说明】

- `-c` 或 `--changes ` 当文件的权限真正改变时，显示文件权限改变的详细说明
- `-f` 或 `--silent` 或 `--quiet` 静默模式，不显示任何错误信息
- `-v` 或 `--verbose` 显示指令执行的详细信息，详细说明文件权限的变化情况
- `-R` 或 `--recursive` 使用递归的操作方式，改变目录及目录下所有子目录和文件的权限。
- `--reference=<参考文献>` 把指定文件的权限改为与指定参看文件的权限相同

【参数说明】

模式  权限模式，可用字符标记法和数字标记法

文件  要改变权限的文件列表，可以是多个文件或目录，支持通配符

【技巧提示】