

# 事务（Transaction）

> 事务（Transaction）是一个操作序列。这些操作要么都做，要么都不做，是一个不可分割的工作单位，是数据库环境中的逻辑工作单位

> 当一个业务逻辑需要多个sql完成时，如果其中某条sql语句出错，则希望整个操作都退回
使用事务可以完成退回的功能，保证业务逻辑的正确性

> 事务是为了保证数据库的完整性

## 事务语句
- 开启 begin;
- 提交 commit;
- 回滚 rollback;


## 注意

- 提交或回滚前数据的状态
    - 以前的数据可恢复
    - 当前的用户可以看到DML操作的结果
    - 其他用户不能看到DML操作的结果
    - 被操作的数据被锁住,其他用户不能修改这些数据
- 提交后数据的状态
    - 数据的修改被永久写在数据库中
    - 数据以前的状态永久性丢失
    - 所有的用户都能看到操作后的结果
    - 记录锁被释放,其他用户可操作这些记录
- 回滚后数据的状态
    - 语句将放弃所有的数据修改
    - 修改的数据被回退
    - 恢复数据以前的状态
    - 行级锁被释放