# 表的关系
> 创建成绩表scores，结构如下

    id
    学生
    科目
    成绩
    

**思考：学生列应该存什么信息呢？**

> 答：学生列的数据不是在这里新建的，而应该从学生表引用过来，关系也是一条数据；根据范式要求应该存储学生的编号，而不是学生的姓名等其它信息
![image](https://note.youdao.com/yws/api/personal/file/02883D44358E4C61AF2B8FFD58A56BC9?method=download&shareKey=036033e8098eaede32c5fbb9cce026fe)

> 同理，科目表也是关系列，引用科目表中的数据

创建表的语句如下:

     create table scores(
    	id int primary key auto_increment,
    	stuid int,
    	subid int,
    	score decimal(5,2)
    	);

## 外键
**思考：怎么保证关系列数据的有效性呢？任何整数都可以吗？**

>答：必须是学生表中id列存在的数据，可以通过外键约束进行数据的有效性验证

**为stuid添加外键约束**

    alter table scores add constraint stu_sco foreign key(stuid) references students(id);

此时插入或者修改数据时，如果stuid的值在students表中不存在则会报错

在创建表时可以直接创建约束

    create table scores(
    id int primary key auto_increment,
    stuid int,
    subid int,
    score decimal(5,2),
    foreign key(stuid) references students(id),
    foreign key(subid) references subjects(id)
    );

## 自关联
设计省信息的表结构provinces

    id
    ptitle
设计市信息的表结构citys

    id
    ctitle
    proid
    
citys表的proid表示城市所属的省，对应着provinces表的id值

**问题：能不能将两个表合成一张表呢？**

**思考：观察两张表发现，citys表比provinces表多一个列proid，其它列的类型都是一样的**

**意义：存储的都是地区信息，而且每种信息的数据量有限，没必要增加一个新表，或者将来还要存储区、乡镇信息，都增加新表的开销太大**

> 答案：定义表areas，结构如下

    id
    atitle
    pid

因为省没有所属的省份，所以可以填写为null

城市所属的省份pid，填写省所对应的编号id

这就是自关联，表中的某一列，关联了这个表中的另外一列，但是它们的业务逻辑含义是不一样的，城市信息的pid引用的是省信息的id

在这个表中，结构不变，可以添加区县、乡镇街道、村社区等信息

创建areas表的语句如下：

    create table areas(
    id int primary key,
    atitle varchar(20),
    pid int,
    foreign key(pid) references areas(id)
    );

思考：部门是否存在自关联



## 练习题
1. 学校的环境
 > 班主任，任课老师，班级，学生，宿舍，电表
2. 模拟百度知道
> 用户，问题，答案