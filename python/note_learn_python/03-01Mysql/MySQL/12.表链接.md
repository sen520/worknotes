# 1.连接
## 1.1 内连接
- 语法规则1：

        SELECT  table1.column, table2.column
        FROM  table1, table2
        WHERE  table1.column1 = table2.column2;

- 语法规则2：
 
        SELECT  table1.column, table2.column
        FROM  table1 inner join table2 on table1.column1 = table2.column2
### 练习

1. 查询所有用户的姓名，部门编号，部门名称
2. 查出员工的编号，姓名，领导的编号和姓名
3. 列出员工姓名，工资和工资的等级

## 1.2 外连接
### 1.2.1 种类
- 左外联接

> 两个表在连接过程中除返回满足连接条件的行以外，还返回左表中不满足条件的行，这种连接称为左外联接。
- 右外联接
>两个表在连接过程中除返回满足连接条件的行以外，还返回右表中不满足条件的行，这种连接称为右外联接。
- 满外联接
> 两个表在连接过程中除返回满足连接条件的行以外，还返回两个表中不满足条件的所有行，这种连接称为满外联接。

## 1.2.2 外连接举例
- 左外连接

        select deptno, dname,empno,ename,job
        from dept left outer join emp
        using(deptno);

- 右外连接

        select deptno, dname,empno,ename,job
        from dept right join emp
        using(deptno);

- 满外连接（mysql不支持）

        select deptno, dname,empno,ename,job
        from dept full join emp
        using(deptno);

### 1.2.3 作业
1. 查询所有部门的部门名字和该部门下的员工名字，如果该部门没有员工，也要显示出部门名字来
2. 查询所有的员工的编号，姓名，有领导的显示领导的编号和姓名，没有领导的只显示员工的信息
3. 查询所有部门的详细信息及每个部门的平均工资，包含没有员工的部门


# 2. 子查询
**问题引入**
> 如何查得所有比“CLARK”工资高的员工的信息

    select * from emp
         where sal>(select sal from emp where ename='CLARK');

思考：查询工资高于平均工资的雇员名字和工资

思考：查询和SCOTT同一部门且比他工资低的雇员名字和工资


**语法格式**

    select 字段列表   from table
        	where 表达式  operator  (select 字段列表  from table);

**特点**
- 子查询在主查询前执行一次
- 主查询使用子查询的结果

## 2.1 单行子查询

- 单行子查询只返回一行记录
- 对单行子查询可使用单行记录比较运算符
< 、  > 、  = 、 >=、  <= 、 <>、!=

### 举例
    select * from emp
    where sal > (select sal from emp where empno = 7566);

思考：查询工资最高的雇员名字和工资。

## 2.2 多行子查询
**特点**

- 多行子查询返回多行记录
- 对多行子查询只能使用多行记录比较运算符
ALL 和子查询返回的所有值比较
ANY 和子查询返回的任意一个值比较
IN 等于列表中的任何一个

**思考**
- 查询工资低于任何一个“CLERK”的工资的雇员信息。
- 查询工资比所有的“SALESMAN”都高的雇员的编号、名字和工资。
- 查询部门20中职务同部门10的雇员一样的雇员信息。


    SELECT  empno, ename, job,sal
    FROM emp
    WHERE   sal < ANY (SELECT sal FROM emp WHERE job = 'CLERK') AND job <> 'CLERK';
    
    SELECT  empno, ename,sal
    FROM emp
    WHERE sal > ALL(SELECT sal FROM emp WHERE job= 'SALESMAN');
    
    SELECT  empno, ename, job FROM emp
    WHERE   job IN (SELECT job FROM emp WHERE deptno=10)
    AND deptno =20;
    
**作业**
1. 查询职务和scott相同，比scott 雇佣时间早的信息
2. 查询每个部门的详细信息及部门平均工资和等级
3. 找出部门编号为20的所有员工中收入最高的职员
4. 查询在雇员中有哪些人是领导
5. 求平均薪水最高的部门的部门编号
6. 求比普通员工的最高薪水还要高的经理人名称
7. 求平均薪水的等级最低的部门名称
